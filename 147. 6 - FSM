/*
Developer   - Sriram Venkata Krishna
Date        - 26-02-2026
Platform    - HDL Bits
*/

//147. 6 - FSM

module top_module 
    (
        input clk,
        input reset,    
        input w,
        output z
    );
    
    parameter S0 = 3'd0, S1 = 3'd1, S2 = 3'd2;
    parameter S3 = 3'd3, S4 = 3'd4, S5 = 3'd5;
    
    reg [2:0] state, next_state;
    
    always @(posedge clk) begin
        if(reset) begin
            next_state = S0;
    	end
    
        else begin
            case(state)
                S0 : next_state = (w) ? S0 : S1;
                S1 : next_state = (w) ? S3 : S2;
                S2 : next_state = (w) ? S3 : S4;
                S3 : next_state = (w) ? S0 : S5;
                S4 : next_state = (w) ? S3 : S4;
                S5 : next_state = (w) ? S3 : S2;
            endcase
        end
        
        state <= next_state;
    end
    
    assign z = (state >= S4);  

endmodule
